window.m=window.m||{},define(["jquery","carousel","knockout","knockoututils","json2.min","bootstrap","iscroll","mobilebase"],function(a,e,n){m.NavModel=function(){var e=this;e.category=n.observableArray(),e.nav={hasMyMenuShowed:!1,hasGnbShowed:!1,selectedIndex:0,selected:new m.NavModelData,init:function(){a("#accordion_navCategory>li>a").addClass("collapsed"),a(".nav-category-sub-header").click(e.nav.hideSub),a("body").append(a('<div id="wrap_modal"></div>').click(function(a){return a.currentTarget===a.target&&(e.nav.hideMyMenu(),e.nav.hide()),!1})),a("#wrap_modal").get(0).addEventListener("touchmove",function(a){return a.preventDefault(),!1},!1),a("#button_navbarOpener").click(e.nav.show),a("#nav_category .close").click(e.nav.hide),a("#button_myMenuOpener, #button_myMenuOpenerTop, [data-opener='mymenu']").click(function(){return e.nav.hasMyMenuShowed===!0?e.nav.hideMyMenu():e.nav.hasGnbShowed===!0?(e.nav.hide(),e.nav.showMyMenu()):e.nav.showMyMenu(),!1}),a("[data-execute]").click(function(){a(this).data("execute");return a.getJSON(a(this).attr("href"),function(a){alert(a.status.msg)}),!1}),a("#nav_myMenu .close").click(e.nav.hideMyMenu),a("#accordion_navCategory").on("shown.bs.collapse",function(n){var o=a(n.target);e.nav.selectedIndex=parseInt(o.data("index"))}),e.nav.myMenuScroll=new window.iScroll("nav_myMenu",{hScrollbar:!1,vScrollbar:!1}),e.nav.cateScrollMain=new window.iScroll("nav_categoryMain",{hScrollbar:!1,vScrollbar:!1}),e.nav.cateScrollSub=new window.iScroll("nav_categorySub",{hScrollbar:!1,vScrollbar:!1}),a("#accordion_navCategory").on("shown.bs.collapse",function(){e.nav.cateScrollMain.refresh()}),a("#accordion_navCategory").on("hidden.bs.collapse",function(){e.nav.cateScrollMain.refresh()}),a("#nav_categoryMain .list-group-item a").click(function(){}),a(window).resize(function(){a(window).height(),a("#nav_category>div>h2").height(),a(".wrap-nav-category-list").children()})},show:function(){return e.nav.showModalBackground(),a("#nav_category").animate({left:"+=280px"},function(){a("#nav_category").css({"box-shadow":"5px 5px 10px #333"}),e.nav.hasGnbShowed=!0}),!1},hide:function(){return e.nav.hideModalBackground(),a("#nav_category").animate({left:"-280px"},function(){a("#nav_category").css({"box-shadow":"none"}),e.nav.hasGnbShowed=!1}),!1},showSub:function(){var n=a(this),o=m.parseParam(n.attr("href"));return e.nav.showNavByParam(o),!1},isSubVisible:function(){return 0===a.tryParseInt(a(".wrap-category-block").eq(1).css("left").replace("px",""))},showNavByParam:function(n){if("category"===n.name){var o=e.category()[parseInt(n.bbsId)].sub_cat()[parseInt(n.subId)],t=o.sub_cat();e.nav.selected.cat_id(o.cat_id()),e.nav.selected.cat_name(o.cat_name()),e.nav.selected.sub_cat.removeAll(),a.map(t,function(a){var n=a.cat_id();a.lec_cat_id=void 0!==m.lecCateInfo[n]?m.lecCateInfo[n].lec_cate:"",e.nav.selected.sub_cat.push(a)}),e.nav.isSubVisible()===!1&&a(".wrap-category-block").animate({left:"-=280px"},function(){}),e.nav.cateScrollSub.refresh()}},hideSub:function(){return a(".wrap-category-block").animate({left:"+=280px"}),!1},showMyMenu:function(){return e.nav.showModalBackground(),a("#nav_myMenu").animate({left:"+=280px"},function(){a("#nav_myMenu").css({"box-shadow":"5px 5px 10px #333"}),e.nav.hasMyMenuShowed=!0}),e.nav.showModalBackground(),!1},hideMyMenu:function(){return e.nav.hideModalBackground(),a("#nav_myMenu").animate({left:"-280px"},function(){a("#nav_myMenu").css({"box-shadow":"none"}),e.nav.hasMyMenuShowed=!1}),e.nav.hideModalBackground(),!1},showModalBackground:function(){a("#wrap_modal").fadeIn()},hideModalBackground:function(){a("#wrap_modal").fadeOut()},setData:function(n){delete n["004"].sub_cat["004004"],a.map(m.convertToNavModelDataArray(n),function(a){e.category.push(a)}),e.nav.init()}}},m.NavModel.prototype=new m.BaseViewModel,m.NavModel.prototype.constructor=m.NavModel,m.NavModelData=function(a){var e=this;a?(e.cat_id=n.observable(a.cat_id),e.cat_name=a.cat_name?n.observable(a.cat_name):n.observable("공무원 교육학"),e.sub_cat=n.observableArray(m.convertToNavModelDataArray(a.sub_cat))):(e.cat_id=n.observable(""),e.cat_name=n.observable(""),e.sub_cat=n.observableArray())},m.convertToNavModelDataArray=function(a){var e=[],n=0;if(a)for(var o in a)e[n]=new m.NavModelData(a[o]),n++;return e}});