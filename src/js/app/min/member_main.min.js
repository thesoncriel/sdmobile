window.m=window.m||{},define(["jquery","carousel","knockout","knockoututils","json2.min","bootstrap","jqueryfinger","owlcarousel","mobilebase"],function(e,a,t){function n(){var a=this;a.member={mb_id:t.observable(m.mb_id),mb_name:t.observable(m.mb_name),clientip:t.observable(m.clientip),save_id:t.observable(!1),ssl_chk_box:t.observable(!1),isAdmin:t.observable(!1),hasLogin:t.observable(void 0!==m.mb_id&&""!==m.mb_id),mb_level:t.observable(m.mb_level),msgFromfindId:t.observable(""),msgFromFindPw:t.observable(""),toOtherView:"",isJoinNow:!1,jqFormLogin:e("#form_login"),jqLoginErrorMsg:e("#message_login_error"),jqFormFindIdByEmail:e("#form_member_findIdByEmail"),jqFormFindIdByPhone:e("#form_member_findIdByPhone"),jqFormFindPwByEmail:e("#form_member_findPwByEmail"),jqFormFindPwByPhone:e("#form_member_findPwByPhone"),jqFindIdErrorMsg:e(".message_find_id_error"),jqFindPwErrorMsg:e(".message_find_pw_error"),jqPanelFindIdResult:e("#panel_member_findIdResult"),jqPanelFindPwResult:e("#panel_member_findPwResult"),init:function(){var t="",n="";this.jqFormLogin.submit(this.onLoginSubmit),this.jqFormFindIdByEmail.submit(this.onFindId),this.jqFormFindIdByPhone.submit(this.onFindId),this.jqFormFindPwByEmail.submit(this.onFindId),this.jqFormFindPwByPhone.submit(this.onFindId),e("#button_member_findIdResultClose").click(function(){a.member.hideFindIdResult()}),e("#button_member_findPwResultClose").click(function(){a.member.hideFindPwResult()}),e("#tab_member_findId a").click(function(){}),e("#tab_member_findPw a").click(function(){}),this.jqFormLogin.find("input[name='mb_id']").focusout(this.onAdminCheck),t=m.cookie.get("save_id"),n=m.cookie.get("ssl_chk_box"),void 0!==t&&""!==t&&(this.save_id(!0),this.mb_id(t),this.checkAdmin(t)),void 0!==n&&""!==n&&this.ssl_chk_box(!0)},moveViewByParam:function(e){"login"===e.name?e.bbsId?(this.toOtherView=e.bbsId,this.showLogin()):this.showLogin():"findid"===e.name?this.showFindId():"findpw"===e.name?this.showFindPw():"join"===e.name?this.showJoin():"modify"===e.name?this.showModify():"coupon"===e.name?this.showCoupon():"logout"===e.name&&this.logout()},showLogin:function(){m.viewSlider.left("#view_login")},showFindId:function(){m.slideLeft(e(".active-view"),e("#view_findId"))},showFindPw:function(){m.slideLeft(e(".active-view"),e("#view_findPw"))},showJoin:function(){a.memJoin.showJoin()},showModify:function(){a.memUpdate.showUpdate()},showCoupon:function(){alert("준비중 입니다.")},showLoginMessage:function(e){""!==e&&alert(e)},showFindIdMessage:function(e){var m=this.jqFindIdErrorMsg;this.jqFindIdErrorMsg.text(e),m.stop().fadeIn(250).delay(4e3).fadeOut(500)},showFindPwMessage:function(e){var m=this.jqFindPwErrorMsg;this.jqFindPwErrorMsg.text(e),m.stop().fadeIn(250).delay(4e3).fadeOut(500)},showFindIdPwMessage:function(e){""!==e&&alert(e)},showFindIdResult:function(){m.viewSlider.left("#view_findIdResult")},hideFindIdResult:function(){m.viewSlider.prev()},showFindPwResult:function(){m.viewSlider.left("#view_findPwResult")},hideFindPwResult:function(){m.viewSlider.prev()},clearUserLoginInput:function(){this.jqFormLogin.find("[name='mb_password']").val(""),this.jqFormLogin.find("[name='adm_password']").val("")},checkAdmin:function(t){var n=(m.getDomain(),{mb_id:t});e.post("/mobile/mb/ajax_adm_check.php",n,function(m){var t=e.parseJSON(m);console.log(t),"1"===t.status.id?a.member.isAdmin(!0):a.member.isAdmin(!1)}).fail(function(e){console.log(e),a.member.showLoginMessage(e)})},login:function(){a.member.jqFormLogin.submit()},logout:function(){confirm("로그아웃 하시겠습니까?")===!0&&e.post("/mobile/mb/logout.php",function(){a.member.onLogoutSuccess({mb_id:a.member.mb_id()}),a.member.mb_id(""),a.member.mb_name(""),a.member.mb_level(1),m.mb_id="",m.mb_level=1,m.toast("성공적으로 로그아웃 하였습니다."),a.member.hasLogin(!1)})},onLoginSubmit:function(){var t=m.serializeMap(a.member.jqFormLogin),n=m.getDomain(),i=a.member.toOtherView;return""===t.mb_id?(a.member.showLoginMessage("아이디를 입력하여 주십시오."),!1):""===t.mb_password?(a.member.showLoginMessage("비밀번호를 입력하여 주십시오."),!1):a.member.isAdmin()===!0&&""===t.adm_password?(a.member.showLoginMessage("관리자 비밀번호를 입력하여 주십시오."),!1):(e.post(a.member.jqFormLogin.attr("action"),t,function(o){var r=e.parseJSON(o),s=r.status[0],l=r.mb[0];console.log(r),"0"===s.status?a.member.showLoginMessage(s.msg):(m.mb_name=l.mb_name,m.mb_id=l.mb_id,a.member.mb_id(l.mb_id),a.member.mb_name(l.mb_name),a.member.mb_level(parseInt(l.mb_level)),a.member.showLoginMessage(""),"true"===t.ssl_chk_box?m.cookie.set("ssl_chk_box",t.ssl_chk_box,720,n):m.cookie.remove("ssl_chk_box"),a.member.clearUserLoginInput(),m.toast("로그인 되었습니다."),a.member.hasLogin(!0),a.member.isJoinNow===!0&&(i="main",a.member.isJoinNow=!1),a.member.onLoginSuccess({mb_id:m.mb_id},{toOtherView:i}),""!==i?(console.log("otherview:"+i),a.member.toOtherView=""):history.back()),"true"===t.save_id?m.cookie.set("save_id",t.mb_id,720,n):m.cookie.remove("save_id")}),!1)},onAdminCheck:function(){a.member.checkAdmin(e(this).val())},onFindId:function(){var t=e(this),n=(m.getDomain(),m.serializeMap(t)),i=null,o="";if(""===n.mb_name)return o="이름을 정확히 입력하여 주십시오.",a.member.showFindIdPwMessage(o,n.what_find),!1;if("pw"===n.what_find&&(""===n.mb_id||n.mb_id.length<4))return o="아이디를 정확히 입력하여 주십시오.",a.member.showFindIdPwMessage(o,n.what_find),!1;if("email"===n.find_type){if(i=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/,""===n.mb_email||i.test(n.mb_email)===!1)return o="이메일을 정확히 입력하여 주십시오.",a.member.showFindIdPwMessage(o,n.what_find),!1}else if("phone"===n.find_type&&(void 0!==n.mb_hp&&(n.mb_hp=m.mergePhoneInfo(n.mb_hp)),""===n.mb_hp||n.mb_hp.length<12))return o="휴대폰 번호를 정확히 입력하여 주십시오.",a.member.showFindIdPwMessage(o,n.what_find),!1;return console.log(t.serialize()),e.post(t.attr("action"),n,function(m){console.log(m);var t=e.parseJSON(m);console.log(t),"id"===n.what_find?(a.member.msgFromfindId(t.status.msg),a.member.showFindIdResult()):(a.member.msgFromFindPw(t.status.msg.replace(/\\n/g,"<br/>")),a.member.showFindPwResult())}),!1},evt_loginsuccess:null,loginsuccess:function(e){this.evt_loginsuccess=e},onLoginSuccess:function(e,m){try{this.evt_loginsuccess(e,m)}catch(a){}},evt_logoutsuccess:null,logoutsuccess:function(e){this.evt_logoutsuccess=e},onLogoutSuccess:function(e){try{this.evt_logoutsuccess(e)}catch(m){}}},a.memJoin={mjYear:t.observableArray(),mjMonth:t.observableArray(),mjDay:t.observableArray(),msg:t.observable(""),sms_msg:t.observable(""),modal_msg:t.observable(""),submit_status:t.observable(0),status:t.observable(0),agreenum:t.observable(0),mj_name:t.observable(""),mj_hp0:t.observable(""),mj_hp1:t.observable(""),mj_hp2:t.observable(""),mjIdchk:t.observable(0),mjIdchkstatus:t.observable(0),buttonChk:t.observable(0),chkparent:t.observable(0),myAgreechk:t.observable(0),parentAgreechk:t.observable(0),mjMode:t.observable(""),mjId:t.observable(""),mjName:t.observable(""),isModify:t.observable(!1),jqFormUpdate:e("#form_memberJoin"),init:function(){e(".cate-title a").addClass("collapsed"),e("[name='chk_army']").click(function(){e("[name='chk_army']").is(":checked")===!0?e("#army_info_area").show():e("#army_info_area").hide()}),e("[name='provision_all_agree']").click(function(){e("[name='provision_all_agree']").is(":checked")===!0&&(e("[name='use_provision']").prop("checked",!0),e("[name='info_provision']").prop("checked",!0))}),e("[name='b1']").click(function(){var m=e(":radio[name='b1']:checked").val();e("[name='memfav']").val(m)}),e("#mj_name").on("keyup",function(){for(i=0;i<e("#mj_name").val().length;i++){var m=e("#mj_name").val().charCodeAt(i);if(128>m)return alert("한글만 입력 가능합니다"),e("#mj_name").val(""),e("#mj_name").focus(),!1}}),e("#p_name").on("keyup",function(){for(i=0;i<e("#p_name").val().length;i++){var m=e("#p_name").val().charCodeAt(i);if(128>m)return alert("한글만 입력 가능합니다"),e("#p_name").val(""),e("#p_name").focus(),!1}}),e("#p_relation").on("keyup",function(){for(i=0;i<e("#p_relation").val().length;i++){var m=e("#p_relation").val().charCodeAt(i);if(128>m)return alert("한글만 입력 가능합니다"),e("#p_relation").val(""),e("#p_relation").focus(),!1}}),e("#mj_id").on("keyup",function(){for(i=0;i<e("#mj_id").val().length;i++){var m=e("#mj_id").val().charCodeAt(i);if(m>=128)return alert("영문과 숫자만 입력 가능합니다"),e("#mj_id").val(""),e("#mj_id").focus(),!1}}),e("#mj_email").on("keyup",function(){for(i=0;i<e("#mj_email").val().length;i++){var m=e("#mj_email").val().charCodeAt(i);if(m>=128)return alert("영문과 숫자만 입력 가능합니다"),e("#mj_email").val(""),e("#mj_email").focus(),!1}}),this.jqFormUpdate.submit(this.onJoinSumit),this.loadYear(),this.loadMonth(),this.loadDay()},checkModify:function(){var m=a.memJoin.isModify();m===!0?(e.getJSON("/mobile/mb/member_info.php",{mb_id:a.member.mb_id},function(m){a.memJoin.mj_name(m[0].mb_name),a.memJoin.mjId(m[0].mb_id),e("#mj_id").attr("readonly",!0),e("[name='mj_password']").attr("required",!1),e("[name='mj_password_chk']").attr("required",!1),e("#mj_name").attr("readonly",!0),e("[name='w']").val("u")}),a.memJoin.mjMode("정보수정")):(a.memJoin.mj_name(""),a.memJoin.mjId(""),e("#mj_id").attr("readonly",!1),e("#mj_name").attr("readonly",!1),e("[name='w']").val(""),a.memJoin.mjMode("회원가입"))},makeYearArray:function(e,m){for(var a=[],t=m;t>=e;t--)a.push(t);return a},makeMonthDayArray:function(e,m){for(var a=[],t=e;m>=t;t++)10>t&&(t="0"+t),a.push(t);return a},includeRecaptcha:function(){var m=e("#recaptcha_join");0===m.children().length&&require(["recaptcha"],function(){window.Recaptcha.create("6LdlfPgSAAAAAPtMMtOIblkvZBEPS7nnMROEhTWJ","recaptcha_join",{theme:"white"})})},loadYear:function(){var e=1900,m=(new Date).getFullYear();this.mjYear(this.makeYearArray(e,m))},loadMonth:function(){var e=1,m=12;this.mjMonth(this.makeMonthDayArray(e,m))},loadDay:function(){var e=1,m=31;this.mjDay(this.makeMonthDayArray(e,m))},checkMemberId:function(){var m=e("[name = 'mj_id']").val();return m.length<4||m.length>12?(alert("아이디는 6~12자의 영문, 소문자, 숫자 조합만이 가능합니다"),!1):(e.getJSON("/mobile/mb/checkMemberId.php",{mb_id:m},function(e){a.memJoin.msg(e.status.msg),a.memJoin.mjIdchk(1),a.memJoin.mjIdchkstatus(e.status.status)}),void 0)},getAgreeNum:function(){var m=a.memJoin.buttonChk(),t=m+1,n=a.memJoin.chkparent();if(1==n){a.memJoin.buttonChk(0);var i=e("[name = 'p_name']").val(),o=e("#p_hp0").val(),r=e("#p_hp1").val(),s=e("#p_hp2").val(),l="parent",d="법정대리인",h=e("#mj_hp0").val()+"-"+e("#mj_hp1").val()+"-"+e("#mj_hp2").val(),_=o+"-"+r+"-"+s;if(h===_)return alert("법정 대리인의 휴대폰 번호와 회원의 휴대폰 번호는 일치할수 없습니다."),!1}else var i=e("[name = 'mj_name']").val(),o=e("#mj_hp0").val(),r=e("#mj_hp1").val(),s=e("#mj_hp2").val(),l="alone",d="회원";return i?o||r||s?o&&r&&s?t>3?(alert("인증번호를 3회 이상 받을수 없습니다. 다시 진행해주세요."),!1):(a.memJoin.buttonChk(t),e.getJSON("/mobile/mb/getAgreeNumber.php",{hp0:o,hp1:r,hp2:s,mode:l,mb_name:i},function(e){a.memJoin.sms_msg(e.status.msg),a.memJoin.agreenum(e.status.status),alert(a.memJoin.sms_msg())}),i="",o="",r="",s="",l="",d="",a.memJoin.modal_msg(""),void 0):(alert("휴대폰 번호를 올바르게 입력해주세요."),!1):(alert("휴대폰 번호를 입력해주세요."),!1):(alert(d+" 이름을 입력해주세요."),!1)},chkAgreeNum:function(){a.memJoin.modal_msg("");var m=a.memJoin.chkparent(),t=a.memJoin.agreenum();if(1==m)var n=e("[name='p_agrere_num']").val();else var n=e("[name='mj_agrere_num']").val();return 0==t?(alert("인증번호를 전송받지 못하였습니다."),!1):n?t!=n?(alert("인증번호가 정확하지 않습니다."),!1):(t==n&&(alert("인증에 성공하였습니다."),a.memJoin.mj_name(e("[name='mj_name']").val()),a.memJoin.mj_hp0(e("#mj_hp0").val()),a.memJoin.mj_hp1(e("#mj_hp1").val()),a.memJoin.mj_hp2(e("#mj_hp2").val()),a.memJoin.agreenum(0),1==m?a.memJoin.parentAgreechk(1):a.memJoin.myAgreechk(1)),void 0):(alert("인증번호를 입력해주세요."),!1)},chkBirth:function(){var m=e("[name = 'birth_y']").val(),t=e("[name = 'birth_m']").val(),n=e("[name = 'birth_d']").val();if(m&&t&&n){var i=new Date(t+"/"+n+"/"+m),o=new Date,r=o.getFullYear()-i.getFullYear();i.setFullYear(o.getFullYear()),i>o&&r--,14>r?(e("#parent_info").show(),a.memJoin.chkparent(1)):(e("#parent_info").hide(),a.memJoin.chkparent(0))}},onClickToStep2:function(){return 1!==a.memJoin.myAgreechk()?(alert("휴대폰 인증후 다음단계로 이동이 가능합니다."),!1):e("[name='use_provision']").is(":checked")?e("[name='info_provision']").is(":checked")?(a.memJoin.showJoinStep2(),a.memJoin.modal_msg(""),void 0):(alert("개인정보 수집·이용동의를 해주세요"),!1):(alert("이용약관을 읽고 체크해주세요."),!1)},mjPrev:function(){m.viewSlider.prev()},showJoin:function(){this.isModify(!1),a.member.isJoinNow=!0,this.showJoinStep1(),this.checkModify()},showModify:function(){this.isModify(!0),this.showJoinStep1(),this.checkModify()},showJoinStep1:function(){this.includeRecaptcha(),m.viewSlider.left("#view_memberJoinStep1")},showJoinStep2:function(){m.viewSlider.left("#view_memberJoinStep2")},showJoinStep3:function(){m.viewSlider.left("#view_memberJoinStep3")},showMoalMessage:function(){e("#modal_memberJoinMessage").modal("show")},memJoinCompleted:function(){a.memJoin.jqFormUpdate.submit()},onJoinSumit:function(){var t=a.memJoin.mjIdchkstatus(),n=a.memJoin.mjIdchk(),i=a.memJoin,o=a.memJoin.parentAgreechk(),r=m.serializeMap(a.memJoin.jqFormUpdate);a.memJoin.modal_msg("");var s=a.memJoin.isModify();if(s===!0){if(!r.mj_name)return alert("회원 이름이 입력되지 않았습니다."),!1;if(!r.mj_hp0||!r.mj_hp1||!r.mj_hp2)return alert("휴대폰 번호가 올바르지 않습니다."),!1;if(!r.birth_y||!r.birth_m||!r.birth_d)return alert("생년 월 일 이 올바르지 않습니다."),!1;if(r.mj_password){if(r.mj_password!=r.mj_password_chk)return alert("패스워가 일치하지 않습니다."),!1;if(r.mj_password.length<6||r.mj_password.length>12)return alert("비밀번호는 6~12자의 영문, 숫자, 특수문자만 가능합니다"),!1;if(r.mj_password_chk.length<6||r.mj_password_chk.length>12)return alert("비밀번호는 6~12자의 영문, 숫자, 특수문자만 가능합니다"),!1;if(!r.mj_password_chk)return alert("패스워드를 확인해주세요."),!1}e.post(a.memJoin.jqFormUpdate.attr("action"),r,function(m){try{var t=e.parseJSON(m);if(t){if(2!==t.status.status)return alert(t.status.msg),a.memJoin.submit_status(t.status.status),!1;i.showJoinStep3()}}catch(n){console.log(n),console.log(m),alert("error")}})}else{if(!r.mj_id)return alert("회원 아이디가 입력되지 않았습니다."),!1;if(0===n)return alert("아이디 중복 체크를 해주세요."),!1;if(9===t)return alert("사용할수 없는 아이디 입니다."),!1;if(r.mj_id.length<4||r.mj_id.length>12)return alert("아이디는 6~12자의 영문, 소문자, 숫자 조합만이 가능합니다"),!1;if(!r.mj_name)return alert("회원 이름이 입력되지 않았습니다."),!1;if(!r.mj_hp0||!r.mj_hp1||!r.mj_hp2)return alert("휴대폰 번호가 올바르지 않습니다."),!1;if(!r.birth_y||!r.birth_m||!r.birth_d)return alert("생년 월 일 이 올바르지 않습니다."),!1;if(!r.mj_password)return alert("패스워드를 입력해주세요."),!1;if(r.mj_password.length<6||r.mj_password.length>12)return alert("비밀번호는 6~12자의 영문, 숫자, 특수문자만 가능합니다"),!1;if(r.mj_password_chk.length<6||r.mj_password_chk.length>12)return alert("비밀번호는 6~12자의 영문, 숫자, 특수문자만 가능합니다"),!1;if(!r.mj_password_chk)return alert("패스워드를 확인해주세요."),!1;if(r.mj_password!=r.mj_password_chk)return alert("패스워가 일치하지 않습니다."),!1;if("1"===r.chk_army){if(!r.army_team)return alert("소속되었던 사단을 입력해 주세요."),!1;if(!r.army_class)return alert("전역 계급 입력해 주세요."),!1;if(!r.army_number)return alert("군번을 입력해 주세요."),!1;if(!r.army_f_date||!r.army_l_date)return alert("전직지원 교육기간을 입력해 주세요."),!1}if(1===a.memJoin.chkparent()){var l=r.mj_hp0+"-"+r.mj_hp1+"-"+r.mj_hp2,d=r.p_hp0+"-"+r.p_hp1+"-"+r.p_hp2;if(!r.p_name)return alert("법정 대리인 이름을 입력해 주세요."),!1;if(r.p_name===r.mj_name)return alert("법정 대리인 이름과 회원 이름은 일치할수 없습니다."),!1;if(!r.p_relation)return alert("법정 대리인 과의 관계를 입력하세요."),!1;if(!r.p_hp0||!r.p_hp1||!r.p_hp2)return alert("법정 대리인의 휴대폰 번호를 입력하세요."),!1;if(l===d)return alert("법정 대리인의 휴대폰 번호와 회원의 휴대폰 번호는 일치할수 없습니다."),!1;if(1!==o)return alert("법정 대리인 휴대폰 인증 성공에 실패했습니다.\n\r인증후 진행하실수 있습니다."),!1}if(e("[name='b1']").is(":checked")===!0)e.post(a.memJoin.jqFormUpdate.attr("action"),r,function(m){try{var t=e.parseJSON(m);if(t){if(1!==t.status.status)return alert(t.status.msg),a.memJoin.submit_status(t.status.status),!1;i.showJoinStep3()}}catch(n){console.log(n),console.log(m),alert("error")}});else{var h=confirm("관심분야 미 체크시 적립금이 지급되지 않습니다.\n\r그래도 이대로 가입하시겠습니까?");if(!h)return!1;e.post(a.memJoin.jqFormUpdate.attr("action"),r,function(m){try{var t=e.parseJSON(m);if(t){if(1!==t.status.status)return alert(t.status.msg),a.memJoin.submit_status(t.status.status),!1;i.showJoinStep3()}}catch(n){console.log(n),console.log(m),alert("error")}})}}return!1}},a.memUpdate={hp0:t.observable(0),hp1:t.observable(0),hp2:t.observable(0),mb_id:t.observable(""),mb_name:t.observable(""),mb_email:t.observable(""),mb_hp:t.observable(""),mb_sms:t.observable(!1),mb_mailling:t.observable(!1),mb_fav:t.observable(""),mb_zip1:t.observable(0),mb_zip2:t.observable(0),mb_addr1:t.observable(""),mb_addr2:t.observable(""),sms_msg:t.observable(""),modal_msg:t.observable(""),agreenum:t.observable(0),buttonChk:t.observable(0),myAgreechk:t.observable(0),jqFormCheck:e("#form_memberCheck"),jqFormUpdate:e("#form_memberUpdate"),init:function(){e(".cate-title a").addClass("collapsed"),e("[name='b1']").click(function(){var m=e(":radio[name='b1']:checked").val();e("[name='memfav']").val(m)}),e("[name='mb_email']").on("keyup",function(){for(i=0;i<e("[name='mb_email']").val().length;i++){var m=e("[name='mb_email']").val().charCodeAt(i);if(m>=128)return alert("영문과 숫자만 입력 가능합니다"),e("[name='mb_email']").val(""),e("[name='mb_email']").focus(),!1}}),this.jqFormCheck.submit(this.onCheckSumit),this.jqFormUpdate.submit(this.onUpdateSumit)},loadMemberInfo:function(){e.getJSON("/mobile/mb/member_info.php",{mb_id:m.mb_id},function(m){if(console.log(m),void 0!==m&&null!==m){if(a.memUpdate.mb_id(m[0].mb_id),a.memUpdate.mb_name(m[0].mb_name),a.memUpdate.mb_email(m[0].mb_email),a.memUpdate.mb_zip1(m[0].mb_zip1),a.memUpdate.mb_zip2(m[0].mb_zip2),a.memUpdate.mb_addr1(m[0].mb_addr1),a.memUpdate.mb_addr2(m[0].mb_addr2),"1"===m[0].mb_sms&&a.memUpdate.mb_sms(!0),"1"===m[0].mb_mailling&&a.memUpdate.mb_mailling(!0),m[0].mb_hp){var t=m[0].mb_hp.split("-");a.memUpdate.hp0(t[0]),a.memUpdate.hp1(t[1]),a.memUpdate.hp2(t[2])}null!==m[0].fav&&e("[name='b1']").each(function(a){e("[name='b1']").eq(a).val()===m[0].fav&&(e("[name='b1']").eq(a).prop("checked",!0),e("[name='memfav']").val(m[0].fav))})}})},changePhoneNum:function(){var m=confirm("휴대폰 번호를 변경하시려면 인증 절차를 거쳐야 합니다.");m&&(e("#pAgreeButton").show(),e("#pAgreeArea").show(),e("#pChangeButton").hide(),e("[name='mb_hp0']").prop("readonly",!1),e("[name='mb_hp1']").prop("readonly",!1),e("[name='mb_hp2']").prop("readonly",!1),a.memUpdate.myAgreechk(9))},getAgreeNum:function(){var m=a.memUpdate.buttonChk(),t=m+1,n=e("#update_mb_name").val(),i=e("[name = 'mb_hp0']").val(),o=e("[name = 'mb_hp1']").val(),r=e("[name = 'mb_hp2']").val(),s="alone",l="회원";return i||o||r?i&&o&&r?t>3?(alert("인증번호를 3회 이상 받을수 없습니다. 다시 진행해주세요."),!1):(a.memUpdate.buttonChk(t),e.getJSON("/mobile/mb/getAgreeNumber.php",{hp0:i,hp1:o,hp2:r,mode:s,mb_name:n},function(e){a.memUpdate.sms_msg(e.status.msg),a.memUpdate.agreenum(e.status.status),alert(a.memUpdate.sms_msg())}),n="",i="",o="",r="",s="",l="",a.memUpdate.modal_msg(""),void 0):(alert("휴대폰 번호를 올바르게 입력해주세요."),!1):(alert("휴대폰 번호를 입력해주세요."),!1)},chkAgreeNum:function(){a.memUpdate.modal_msg("");var m=a.memUpdate.agreenum(),t=e("[name='mb_agrere_num']").val();return 0==m?(a.memUpdate.modal_msg("인증번호를 전송받지 못하였습니다."),a.memUpdate.showModalMessage(),!1):t?m!=t?(a.memUpdate.modal_msg("인증번호가 정확하지 않습니다."),a.memUpdate.showModalMessage(),!1):(m==t&&(a.memUpdate.modal_msg("인증에 성공하였습니다."),a.memUpdate.agreenum(0),a.memUpdate.showModalMessage(),e("#pAgreeButton").hide(),e("#pAgreeArea").hide(),e("[name='mb_hp0']").prop("readonly",!0),e("[name='mb_hp1']").prop("readonly",!0),e("[name='mb_hp2']").prop("readonly",!0),a.memUpdate.myAgreechk(1),a.memUpdate.showModalMessage(),e("[name='check_phone']").val("ok")),void 0):(a.memUpdate.modal_msg("인증번호를 입력해주세요."),a.memUpdate.showModalMessage(),!1)},showUpdate:function(){this.onLoginCheck()===!0?(this.clearInput(),this.loadMemberInfo(),m.viewSlider.left("#view_memberUpdateStep1")):a.member.showLogin()},showUpdateStep2:function(){m.viewSlider.left("#view_memberUpdateStep2"),a.memUpdate.includeRecaptcha()},showUpdateStep3:function(){m.viewSlider.left("#view_memberUpdateStep3")},mbUpdatePrev:function(){m.viewSlider.prev()},showModalMessage:function(){e("#modal_memberUpdateMessage").modal("show")},memUpdateCompleted:function(){a.memUpdate.jqFormUpdate.submit()},memCheckCompleted:function(){a.memUpdate.jqFormCheck.submit()},clearInput:function(){this.jqFormCheck.find("input[name='mb_password']").val(""),this.jqFormUpdate.find("input[name='recaptcha_response_field']").val(""),this.jqFormUpdate.find("input[name='mb_password']").val(""),this.jqFormUpdate.find("input[name='mb_password_chk']").val("")},onCheckSumit:function(){var t=m.serializeMap(a.memUpdate.jqFormCheck);return e.post(a.memUpdate.jqFormCheck.attr("action"),t,function(m){try{var t=e.parseJSON(m);1===t.status.status?a.memUpdate.showUpdateStep2():(2===t.status.status?a.memUpdate.modal_msg("회원 정보에 문제가 있습니다."):9===t.status.status&&a.memUpdate.modal_msg("아이디와 비밀번호가 일치하지 않습니다."),a.memUpdate.showModalMessage())}catch(n){console.log(n),console.log(m),alert("error")}}),!1},onUpdateSumit:function(){var t=m.serializeMap(a.memUpdate.jqFormUpdate),n=a.memUpdate.myAgreechk();if(t.mb_password){if(t.mb_password!=t.mb_password_chk)return alert("패스워가 일치하지 않습니다."),!1;if(t.mb_password.length<6||t.mb_password.length>12)return alert("비밀번호는 6~12자의 영문, 숫자, 특수문자만 가능합니다"),!1;if(t.mb_password_chk.length<6||t.mb_password_chk.length>12)return alert("비밀번호는 6~12자의 영문, 숫자, 특수문자만 가능합니다"),!1;if(!t.mb_password_chk)return alert("패스워드를 확인해주세요."),!1}9===n&&alert("휴대폰 번호 변경을 원하였으나 미인증 되었습니다.\n\r기존 휴대폰 번호로 유지됩니다.");var i=confirm("현재 작성하신 내용으로 수정 하시겠습니까?");return i?(e.post(a.memUpdate.jqFormUpdate.attr("action"),t,function(m){try{var t=e.parseJSON(m);if(t){if(2!==t.status.status)return alert(t.status.msg),!1;a.memUpdate.showUpdateStep3()}}catch(n){console.log(n),console.log(m),alert("error")}}),!1):!1},evt_logincheck:null,logincheck:function(e){this.evt_logincheck=e},onLoginCheck:function(){try{return this.evt_logincheck()}catch(e){}return!1},includeRecaptcha:function(){var m=e("#recaptcha_update");0===m.children().length&&require(["recaptcha"],function(){window.Recaptcha.create("6LdlfPgSAAAAAPtMMtOIblkvZBEPS7nnMROEhTWJ","recaptcha_update",{theme:"white"})})},isVisible:function(){return e("#view_memberUpdateStep2").hasClass("active-view")}},a.member.init(),a.memJoin.init(),a.memUpdate.init()}n.prototype=new m.BaseViewModel,n.prototype.constructor=n,m.MemberModel=n});